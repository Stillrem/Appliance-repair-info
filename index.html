<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Appliance Repair Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <style>
    :root { --primary: #34c759; --primary-dark: #30d158; --background: #000000; --surface: #1c1c1e; --surface-2: #2c2c2e; --surface-3: #3a3a3c; --text: #ffffff; --text-secondary: #8e8e93; --border: #2c2c2e; --shadow: rgba(0, 0, 0, 0.3);}
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:var(--background);color:var(--text);min-height:100vh;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);overflow-x:hidden;}
    .container{max-width:100%;padding:20px;margin:0 auto;min-height:100vh;}
    .header{text-align:center;margin-bottom:30px;padding:20px 0;}
    .logo{width:60px;height:60px;background:linear-gradient(135deg, var(--primary), var(--primary-dark));border-radius:15px;margin:0 auto 15px;display:flex;align-items:center;justify-content:center;font-size:24px;box-shadow:0 8px 32px rgba(52,199,89,0.3);}
    .title{font-size:28px;font-weight:700;margin-bottom:8px;background:linear-gradient(135deg, var(--primary), var(--primary-dark));-webkit-background-clip: text;-webkit-text-fill-color: transparent;background-clip:text;}
    .subtitle{color:var(--text-secondary);font-size:16px;font-weight:500;}
    .mode-toggle{display:flex;background:var(--surface);border-radius:12px;padding:4px;margin:25px 0;box-shadow:inset 0 1px 3px var(--shadow);}
    .mode-btn{flex:1;padding:12px 16px;border:none;background:transparent;color:var(--text-secondary);border-radius:8px;font-weight:600;font-size:15px;transition:all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);cursor:pointer;}
    .mode-btn.active{background:var(--primary);color:var(--text);box-shadow:0 2px 8px rgba(52,199,89,0.3);transform:scale(1.02);}
    .form-section{background:var(--surface);border-radius:16px;padding:24px;margin-bottom:20px;border:1px solid var(--border);box-shadow:0 4px 16px rgba(0,0,0,0.1);}
    .section-title{font-size:18px;font-weight:700;color:var(--primary);margin-bottom:20px;display:flex;align-items:center;gap:8px;}
    .form-group{margin-bottom:20px;}
    .form-group:last-child{margin-bottom:0;}
    .label{display:block;font-weight:600;margin-bottom:8px;color:var(--text);font-size:16px;}
    .translation{color:var(--text-secondary);font-size:14px;font-style:italic;display:block;margin-top:2px;}
    .translation.hidden{display:none;}
    select,input,textarea{width:100%;padding:16px;background:var(--surface-2);border:1.5px solid var(--border);border-radius:12px;color:var(--text);font-size:16px;font-family:inherit;transition:all 0.3s ease;-webkit-appearance:none;appearance:none;}
    select{background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 12px center;background-size:20px;padding-right:50px;cursor:pointer;}
    select:focus,input:focus,textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(52,199,89,0.1);transform:translateY(-1px);}
    input::placeholder,textarea::placeholder{color:var(--text-secondary);}
    textarea{min-height:100px;resize:vertical;line-height:1.5;}
    .form-row{display:grid;grid-template-columns:1fr 1fr;gap:15px;}
    .action-buttons{display:flex;gap:12px;margin-top:30px;}
    .btn{flex:1;padding:16px 24px;border:none;border-radius:12px;font-weight:600;font-size:16px;transition:all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);cursor:pointer;position:relative;overflow:hidden;}
    .btn:active{transform:scale(0.98);}
    .btn-primary{background:linear-gradient(135deg, var(--primary), var(--primary-dark));color:var(--text);box-shadow:0 4px 16px rgba(52,199,89,0.3);}
    .btn-primary:hover{box-shadow:0 6px 20px rgba(52,199,89,0.4);transform:translateY(-2px);}
    .btn-secondary{background:var(--surface-2);color:var(--text);border:1px solid var(--border);}
    .btn-secondary:hover{background:var(--surface-3);transform:translateY(-1px);}
    .report-output{background:var(--surface);border-radius:16px;padding:24px;margin-top:30px;border:1px solid var(--border);box-shadow:0 4px 16px rgba(0,0,0,0.1);}
    .report-title{font-size:20px;font-weight:700;margin-bottom:20px;color:var(--primary);display:flex;align-items:center;gap:8px;}
    .report-content{line-height:1.8;}
    .report-line{margin-bottom:12px;padding:12px 0;border-bottom:1px solid var(--border);}
    .report-line:last-child{border-bottom:none;margin-bottom:0;}
    .report-label{font-weight:600;color:var(--text-secondary);font-size:14px;text-transform:uppercase;letter-spacing:0.5px;margin-bottom:4px;}
    .report-value{font-size:16px;color:var(--text);}
    .templates{margin-top:30px;}
    .templates-title{font-size:18px;font-weight:700;color:var(--primary);margin-bottom:15px;display:flex;align-items:center;gap:8px;}
    .template-btn{width:100%;padding:16px;background:var(--surface-2);border:1px solid var(--border);border-radius:12px;color:var(--text);text-align:left;margin-bottom:12px;font-size:15px;cursor:pointer;transition:all 0.3s ease;line-height:1.4;}
    .template-btn:hover{background:var(--surface-3);border-color:var(--primary);transform:translateY(-1px);}
    .template-btn:active{transform:scale(0.98);}
    .template-main{font-weight:600;margin-bottom:4px;}
    .template-translation{color:var(--text-secondary);font-size:13px;}
    .hidden{display:none !important;}
    .input-dollar {position:relative;}
    .input-dollar input[type="number"]{padding-left:28px;}
    .input-dollar::before{content:'üí≤';position:absolute;top:50%;left:11px;transform:translateY(-50%);color:#aaa;font-size:18px;}
    @media (max-width:480px){.container{padding:15px;}.title{font-size:24px;}.form-row{grid-template-columns:1fr;gap:12px;}.action-buttons{flex-direction:column;}.btn{padding:14px 20px;}}
    @media (min-width:768px){.container{max-width:600px;}}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="logo">üîß</div>
      <h1 class="title">Appliance Repair Pro</h1>
      <p class="subtitle">Professional Service Reports</p>
      <div class="mode-toggle">
        <button class="mode-btn active" data-mode="technician">üë®‚Äçüîß Technician</button>
        <button class="mode-btn" data-mode="client">üë§ Client</button>
      </div>
    </div>
    <form id="repairForm" autocomplete="off">
      <div class="form-section">
        <div class="section-title">üè† Appliance Information</div>
        <div class="form-group">
          <label class="label">Appliance Type <span class="translation">–¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏</span></label>
          <select id="category" required>
            <option value="">Select Appliance Type</option>
            <option value="refrigerator">Refrigerator / –•–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫</option>
            <option value="dishwasher">Dishwasher / –ü–æ—Å—É–¥–æ–º–æ–µ—á–Ω–∞—è –º–∞—à–∏–Ω–∞</option>
            <option value="washing_machine">Washing Machine / –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞</option>
            <option value="dryer">Dryer / –°—É—à–∏–ª–∫–∞</option>
            <option value="stove_oven">Stove/Oven / –ü–ª–∏—Ç–∞/–î—É—Ö–æ–≤–∫–∞</option>
            <option value="microwave">Microwave / –ú–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞</option>
          </select>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">Brand <span class="translation">–ë—Ä–µ–Ω–¥</span></label>
            <select id="brand" required>
              <option value="">Select Brand</option>
            </select>
          </div>
          <div class="form-group">
            <label class="label">Model <span class="translation">–ú–æ–¥–µ–ª—å</span></label>
            <input type="text" id="model" placeholder="Enter model number" required />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="label">Serial Number <span class="translation">–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä</span></label>
            <input type="text" id="serial" placeholder="Enter serial number" />
          </div>
          <div class="form-group">
            <label class="label">Year of Manufacture <span class="translation">–ì–æ–¥ –≤—ã–ø—É—Å–∫–∞</span></label>
            <input type="text" id="year" placeholder="2020" />
          </div>
        </div>
      </div>
      <div class="form-section">
        <div class="section-title">üîç Service Details</div>
        <div class="form-group">
          <label class="label">Problem <span class="translation">–ü—Ä–æ–±–ª–µ–º–∞</span></label>
          <select id="problem" required><option value="">Select Problem</option></select>
        </div>
        <div class="form-group">
          <label class="label">Diagnosis <span class="translation">–î–∏–∞–≥–Ω–æ–∑</span></label>
          <select id="diagnosis" required><option value="">Select Diagnosis</option></select>
        </div>
        <div class="form-group">
          <label class="label">Action Taken <span class="translation">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</span></label>
          <select id="action" required><option value="">Select Action</option></select>
        </div>
        <div class="form-group">
          <label class="label">Status <span class="translation">–°—Ç–∞—Ç—É—Å</span></label>
          <select id="status" required>
            <option value="">Select Status</option>
            <option value="completed">‚úÖ Fixed 100% / –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ</option>
            <option value="waiting">‚è≥ Waiting for Part / –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏</option>
            <option value="temporary">üîß Temporary Fix / –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ</option>
            <option value="unrepairable">‚ùå Not Repairable / –ù–µ –ø–æ–¥–ª–µ–∂–∏—Ç —Ä–µ–º–æ–Ω—Ç—É</option>
          </select>
        </div>
        <div class="form-group">
          <label class="label">Additional Notes <span class="translation">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏</span></label>
          <textarea id="notes" placeholder="Enter any additional details or recommendations..."></textarea>
        </div>
        <div class="form-group input-dollar">
          <label class="label">Price <span class="translation">–°—Ç–æ–∏–º–æ—Å—Ç—å</span></label>
          <input type="number" id="price" placeholder="0" min="0" step="1" />
        </div>
      </div>
      <div class="action-buttons">
        <button type="submit" class="btn btn-primary">üìã Generate Report</button>
        <button type="button" class="btn btn-secondary" id="clearBtn">üóëÔ∏è Clear Form</button>
      </div>
    </form>
    <div id="reportOutput" class="report-output hidden">
      <div class="report-title">üìÑ Service Report</div>
      <div id="reportContent" class="report-content"></div>
    </div>
    <div class="templates">
      <div class="templates-title">üí¨ Customer Message Templates</div>
      <button class="template-btn" data-template="completion">
        <div class="template-main">‚úÖ Service completed successfully - Your appliance is working perfectly</div>
        <div class="template-translation">‚úÖ –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ - –í–∞—à–∞ —Ç–µ—Ö–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ</div>
      </button>
      <button class="template-btn" data-template="parts">
        <div class="template-main">üîß Part ordered - We'll return within 3-5 business days to complete the repair</div>
        <div class="template-translation">üîß –ó–∞–ø—á–∞—Å—Ç—å –∑–∞–∫–∞–∑–∞–Ω–∞ - –í–µ—Ä–Ω–µ–º—Å—è —á–µ—Ä–µ–∑ 3-5 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–º–æ–Ω—Ç–∞</div>
      </button>
      <button class="template-btn" data-template="estimate">
        <div class="template-main">üí∞ Repair estimate provided - Please review and let us know your decision</div>
        <div class="template-translation">üí∞ –°–º–µ—Ç–∞ —Ä–µ–º–æ–Ω—Ç–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ - –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏ —Å–æ–æ–±—â–∏—Ç–µ —Ä–µ—à–µ–Ω–∏–µ</div>
      </button>
      <button class="template-btn" data-template="warranty">
        <div class="template-main">üõ°Ô∏è Repair covered under warranty - No charge for today's service</div>
        <div class="template-translation">üõ°Ô∏è –†–µ–º–æ–Ω—Ç –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≥–∞—Ä–∞–Ω—Ç–∏–µ–π - –°–µ–≥–æ–¥–Ω—è—à–Ω–µ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
      </button>
    </div>
  </div>
  <script>
const applianceData = {
refrigerator:{
brands:["LG","Samsung","Whirlpool","GE","Bosch","Frigidaire","Kenmore","Haier","Electrolux","Siemens","Miele","Hotpoint","Maytag","Sharp","Panasonic","Hisense","Beko","Ariston","Indesit","Zanussi","Candy","Amana","Daewoo","Viking","Sub-Zero","Toshiba","Liebherr","Fisher & Paykel","Westinghouse","KitchenAid","Smeg","Blomberg","Danby","Gorenje","Magic Chef","Premier","Roper","RCA","Winia","Galanz","Avanti","Summit","Marvel","Crosley","Thermador","Monogram","Speed Queen","Portage","Kelvinator"],
problems:[{en:"Not cooling",ru:"–ù–µ –æ—Ö–ª–∞–∂–¥–∞–µ—Ç"},{en:"Leaking water",ru:"–¢–µ—á–µ—Ç –≤–æ–¥–∞"},{en:"Frost in freezer",ru:"–ò–Ω–µ–π –≤ –º–æ—Ä–æ–∑–∏–ª—å–Ω–∏–∫–µ"},{en:"Noisy operation",ru:"–°–∏–ª—å–Ω—ã–π —à—É–º"},{en:"Door not sealing",ru:"–î–≤–µ—Ä—Ü–∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è"},{en:"Ice maker not working",ru:"–õ—å–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"},{en:"Water dispenser not working",ru:"–î–∏—Å–ø–µ–Ω—Å–µ—Ä –≤–æ–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"},{en:"Strange odor",ru:"–°—Ç—Ä–∞–Ω–Ω—ã–π –∑–∞–ø–∞—Ö"},{en:"Ice build-up",ru:"–û–±—Ä–∞–∑—É–µ—Ç—Å—è –ª—ë–¥"},{en:"Compressor clicks",ru:"–©–µ–ª–∫–∞–µ—Ç –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä"},{en:"Loose door gasket",ru:"–£–ø–ª–æ—Ç–Ω–∏—Ç–µ–ª—å –¥–≤–µ—Ä—Ü—ã –æ—Ç—Ö–æ–¥–∏—Ç"},{en:"Display not working",ru:"–î–∏—Å–ø–ª–µ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"},{en:"Water filter clogged",ru:"–§–∏–ª—å—Ç—Ä –∑–∞–±–∏–ª—Å—è"},{en:"Excessive condensation",ru:"–ò–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç"},{en:"Too warm",ru:"–°–ª–∏—à–∫–æ–º —Ç–µ–ø–ª–æ"},{en:"Too cold",ru:"–°–ª–∏—à–∫–æ–º —Ö–æ–ª–æ–¥–Ω–æ"},{en:"Freezer over-freezing",ru:"–ú–æ—Ä–æ–∑–∏—Ç —Å–ª–∏—à–∫–æ–º —Å–∏–ª—å–Ω–æ"},{en:"Lights not turning on",ru:"–õ–∞–º–ø–æ—á–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"},{en:"Strange taste in water",ru:"–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –ø—Ä–∏–≤–∫—É—Å –≤–æ–¥—ã"},{en:"No power",ru:"–ù–µ—Ç –ø–∏—Ç–∞–Ω–∏—è"},{en:"Tripping breaker",ru:"–í—ã–±–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç"},{en:"Evaporator fan noisy",ru:"–í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä —à—É–º–∏—Ç"},{en:"Compressor overheating",ru:"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –ø–µ—Ä–µ–≥—Ä–µ–≤–∞–µ—Ç—Å—è"},{en:"Defrost issues",ru:"–ü—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç—Ç–∞–π–∫–æ–π"},{en:"Internal leaks",ru:"–ü—Ä–æ—Ç–µ–∫–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏"},{en:"Shelves broken",ru:"–ü–æ–ª–∫–∏ —Å–ª–æ–º–∞–Ω—ã"},{en:"Humming sound",ru:"–ì—É–ª"},{en:"Buzz from panel",ru:"–ñ—É–∂–∂–∏—Ç –ø–∞–Ω–µ–ª—å"},{en:"Frost buildup",ru:"–ù–∞–º–µ—Ä–∑–∞–Ω–∏–µ –ª—å–¥–∞"},{en:"Condensation inside",ru:"–ö–æ–Ω–¥–µ–Ω—Å–∞—Ç –≤–Ω—É—Ç—Ä–∏"},{en:"Display not working",ru:"–î–∏—Å–ø–ª–µ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"},{en:"Water line frozen",ru:"–ó–∞–º–µ—Ä–∑–ª–∞ –ø–æ–¥–≤–æ–¥–∫–∞"},{en:"Alarm keeps beeping",ru:"–ó–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ—Å—Ç–æ—è–Ω–Ω–æ"},{en:"Vegetables freeze",ru:"–ó–∞–º–µ—Ä–∑–∞—é—Ç –æ–≤–æ—â–∏"},{en:"Fruits spoil fast",ru:"–§—Ä—É–∫—Ç—ã –±—ã—Å—Ç—Ä–æ –ø–æ—Ä—Ç—è—Ç—Å—è"},{en:"Cycling frequently",ru:"–ß–∞—Å—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è"},{en:"Door handle loose",ru:"–†—É—á–∫–∞ –¥–≤–µ—Ä–∏ –±–æ–ª—Ç–∞–µ—Ç—Å—è"},{en:"Door scratching",ru:"–î–≤–µ—Ä—å —Ü–∞—Ä–∞–ø–∞–µ—Ç—Å—è"},{en:"Panel cracked",ru:"–¢—Ä–µ—â–∏–Ω–∞ –Ω–∞ –ø–∞–Ω–µ–ª–∏"},{en:"Water under drawer",ru:"–í–æ–¥–∞ –ø–æ–¥ —è—â–∏–∫–æ–º"},{en:"Ice tastes bad",ru:"–ü–ª–æ—Ö–æ–π –≤–∫—É—Å –ª—å–¥–∞"},{en:"Night light flickers",ru:"–ú–∏–≥–∞–µ—Ç –Ω–æ—á–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞"},{en:"Wi-Fi not connecting",ru:"–ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è Wi-Fi"},{en:"Smart control fails",ru:"–£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"},{en:"Filter reset not working",ru:"–°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–∞ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç"},{en:"Power saving won‚Äôt turn off",ru:"–ù–µ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏–µ"},{en:"Door slams",ru:"–î–≤–µ—Ä—å —Ö–ª–æ–ø–∞–µ—Ç"},{en:"Top shelf freezing",ru:"–í–µ—Ä—Ö–Ω—è—è –ø–æ–ª–∫–∞ –º–æ—Ä–æ–∑–∏—Ç"},{en:"Compressor always running",ru:"–ö–æ–º–ø—Ä–µ—Å—Å–æ—Ä –±–µ—Å–ø—Ä–µ—Ä—ã–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç"}],
diagnosis:[{en:"Compressor faulty",ru:"–ù–µ–∏—Å–ø—Ä–∞–≤–µ–Ω –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä"},{en:"Thermostat replaced",ru:"–¢–µ—Ä–º–æ—Å—Ç–∞—Ç –∑–∞–º–µ–Ω—ë–Ω"},{en:"Start relay bad",ru:"–ü—É—Å–∫–æ–≤–æ–µ —Ä–µ–ª–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ"},{en:"Defrost timer fault",ru:"–¢–∞–π–º–µ—Ä –æ—Ç—Ç–∞–π–∫–∏ –≤—ã—à–µ–ª –∏–∑ —Å—Ç—Ä–æ—è"},{en:"Evaporator fan issue",ru:"–ü—Ä–æ–±–ª–µ–º–∞ –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∞ –∏—Å–ø–∞—Ä–∏—Ç–µ–ª—è"},{en:"Main board defect",ru:"–ù–µ–∏—Å–ø—Ä–∞–≤–Ω–∞ –ø–ª–∞—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"},{en:"Sealed system leak",ru:"–£—Ç–µ—á–∫–∞ —Ö–ª–∞–¥–∞–≥–µ–Ω—Ç–∞"},{en:"Clogged drain tube",ru:"–ó–∞—Å–æ—Ä –¥—Ä–µ–Ω–∞–∂–Ω–æ–π —Ç—Ä—É–±–∫–∏"},{en:"Dirty condenser coils",ru:"–ì—Ä—è–∑–Ω—ã–µ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–Ω—ã–µ –∑–º–µ–µ–≤–∏–∫–∏"},{en:"Low refrigerant",ru:"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–ª–∞–¥–∞–≥–µ–Ω—Ç–∞"},{en:"Temp sensor fault",ru:"–î–∞—Ç—á–∏–∫ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –Ω–µ–∏—Å–ø—Ä–∞–≤–µ–Ω"},{en:"Door switch failed",ru:"–ö–æ–Ω—Ü–µ–≤–∏–∫ –¥–≤–µ—Ä–∏ —Å–ª–æ–º–∞–Ω"},{en:"Heater faulty",ru:"–ù–µ–∏—Å–ø—Ä–∞–≤–µ–Ω –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—å"},{en:"Ice maker valve failed",ru:"–ù–µ–∏—Å–ø—Ä–∞–≤–µ–Ω –∫–ª–∞–ø–∞–Ω –ª—å–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞"},{en:"Blocked air vents",ru:"–í–æ–∑–¥—É—Ö–æ–≤–æ–¥—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã"},{en:"Fuse blown",ru:"–ü–µ—Ä–µ–≥–æ—Ä–µ–ª –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å"},{en:"Capacitor bad",ru:"–ù–µ–∏—Å–ø—Ä–∞–≤–µ–Ω –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä"},{en:"Water filter clogged",ru:"–ó–∞—Å–æ—Ä–µ–Ω–Ω—ã–π –≤–æ–¥—è–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä"},{en:"Faulty damper control",ru:"–ù–µ–∏—Å–ø—Ä–∞–≤–µ–Ω –≤–æ–∑–¥—É—à–Ω—ã–π –¥–µ–º–ø—Ñ–µ—Ä"},{en:"Control panel error",ru:"–û—à–∏–±–∫–∞ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"},{en:"Internal wiring issue",ru:"–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø—Ä–æ–≤–æ–¥–∫–∞"},{en:"Power supply problem",ru:"–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–∏—Ç–∞–Ω–∏–µ–º"},{en:"Fan motor noisy",ru:"–®—É–º–∏—Ç –º–æ—Ç–æ—Ä –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∞"},{en:"Sensors misaligned",ru:"–î–∞—Ç—á–∏–∫–∏ —Å–º–µ—â–µ–Ω—ã"},{en:"Transformer failure",ru:"–°–ª–æ–º–∞–Ω —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä"},{en:"Bypass failed",ru:"–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–∞–π–ø–∞—Å"},{en:"Relay stuck",ru:"–†–µ–ª–µ –∑–∞–ª–∏–ø–ª–æ"},{en:"Pump defective",ru:"–ü–æ–≤—Ä–µ–∂–¥–µ–Ω –Ω–∞—Å–æ—Å"},{en:"Door gasket leaky",ru:"–£–ø–ª–æ—Ç–Ω–∏—Ç–µ–ª—å –¥–≤–µ—Ä–∏ –Ω–µ–≥–µ—Ä–º–µ—Ç–∏—á–µ–Ω"},{en:"Evaporator iced",ru:"–ò—Å–ø–∞—Ä–∏—Ç–µ–ª—å –∑–∞–º–µ—Ä–∑"},{en:"Fan blade broken",ru:"–õ–æ–ø–∞—Å—Ç—å –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–∞ –ø–æ–ª–æ–º–∞–Ω–∞"},{en:"Light socket burnt",ru:"–ü–∞—Ç—Ä–æ–Ω –ª–∞–º–ø—ã —Å–≥–æ—Ä–µ–ª"},{en:"No voltage to part",ru:"–ù–µ—Ç –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –¥–µ—Ç–∞–ª—å"},{en:"Outdated firmware",ru:"–°—Ç–∞—Ä–æ–µ –ü–û"},{en:"Board overheated",ru:"–ü–ª–∞—Ç–∞ –ø–µ—Ä–µ–≥—Ä–µ–ª–∞—Å—å"},{en:"Temp fluctuates",ru:"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞"},{en:"Magnet defective",ru:"–°–ª–æ–º–∞–Ω –º–∞–≥–Ω–∏—Ç"},{en:"Wrong setting",ru:"–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞"},{en:"Wire burnt",ru:"–ü—Ä–æ–≤–æ–¥ –æ–ø–ª–∞–≤–∏–ª—Å—è"},{en:"Sensor dirty",ru:"–î–∞—Ç—á–∏–∫ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω"},{en:"Weak door spring",ru:"–°–ª–∞–±–∞—è –ø—Ä—É–∂–∏–Ω–∞ –¥–≤–µ—Ä–∏"},{en:"Compressor noisy",ru:"–®—É–º–∏—Ç –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä"},{en:"Old gasket",ru:"–°—Ç–∞—Ä–∞—è –ø—Ä–æ–∫–ª–∞–¥–∫–∞"},{en:"Leveling issue",ru:"–ü—Ä–æ–±–ª–µ–º–∞ —Å —É—Ä–æ–≤–Ω–µ–º"},{en:"Frost sensor failed",ru:"–î–∞—Ç—á–∏–∫ –æ–±–º–µ—Ä–∑–∞–Ω–∏—è –≤—ã—à–µ–ª –∏–∑ —Å—Ç—Ä–æ—è"},{en:"Insulation degraded",ru:"–ò–∑–æ–ª—è—Ü–∏—è –∏–∑–Ω–æ—à–µ–Ω–∞"},{en:"Temperature not set",ru:"–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞"},{en:"Control panel locked",ru:"–ü–∞–Ω–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞"},{en:"Incorrect part fitted",ru:"–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª—å"}],
actions:[{en:"Replaced compressor",ru:"–ó–∞–º–µ–Ω–µ–Ω –∫–æ–º–ø—Ä–µ—Å—Å–æ—Ä"},{en:"Replaced thermostat",ru:"–ó–∞–º–µ–Ω—ë–Ω —Ç–µ—Ä–º–æ—Å—Ç–∞—Ç"},{en:"Cleared drain",ru:"–ü–æ—á–∏—â–µ–Ω –¥—Ä–µ–Ω–∞–∂"},{en:"Installed new fan",ru:"–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–æ–≤—ã–π –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä"},{en:"Refilled refrigerant",ru:"–ó–∞–ø—Ä–∞–≤–ª–µ–Ω —Ö–ª–∞–¥–∞–≥–µ–Ω—Ç"},{en:"Reset panel",ru:"–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞ –ø–∞–Ω–µ–ª—å"},{en:"Cleaned coils",ru:"–ü–æ—á–∏—â–µ–Ω—ã –∑–º–µ–µ–≤–∏–∫–∏"},{en:"Adjusted door",ru:"–û—Ç–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–≤–µ—Ä—å"},{en:"Replaced heater",ru:"–ó–∞–º–µ–Ω—ë–Ω –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—å"},{en:"Reprogrammed board",ru:"–ü–µ—Ä–µ–ø—Ä–æ—à–∏—Ç–∞ –ø–ª–∞—Ç–∞"},{en:"New filter installed",ru:"–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä"},{en:"Lubricated hinges",ru:"–°–º–∞–∑–∞–Ω—ã –ø–µ—Ç–ª–∏"},{en:"Board replaced",ru:"–ü–ª–∞—Ç–∞ –∑–∞–º–µ–Ω–µ–Ω–∞"},{en:"Sensor cleaned",ru:"–ü–æ—á–∏—â–µ–Ω –¥–∞—Ç—á–∏–∫"},{en:"Wires repaired",ru:"–ü—Ä–æ–≤–æ–¥–∞ –æ—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã"},{en:"Fuse replaced",ru:"–ó–∞–º–µ–Ω—ë–Ω –ø—Ä–µ–¥–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å"},{en:"Damper fixed",ru:"–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–µ–º–ø—Ñ–µ—Ä"},{en:"Coils vacuumed",ru:"–ó–º–µ–µ–≤–∏–∫–∏ –ø—Ä–æ–ø—ã–ª–µ—Å–æ—à–µ–Ω—ã"},{en:"Replaced valve",ru:"–í–µ–Ω—Ç–∏–ª—å –∑–∞–º–µ–Ω—ë–Ω"},{en:"Noise fixed",ru:"–®—É–º —É—Å—Ç—Ä–∞–Ω—ë–Ω"},{en:"Panel cleaned",ru:"–ü–∞–Ω–µ–ª—å –ø–æ—á–∏—â–µ–Ω–∞"},{en:"Door adjusted",ru:"–†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ –¥–≤–µ—Ä–∏"},{en:"Sensor replaced",ru:"–î–∞—Ç—á–∏–∫ –∑–∞–º–µ–Ω—ë–Ω"},{en:"Level adjusted",ru:"–í—ã—Å—Ç–∞–≤–ª–µ–Ω —É—Ä–æ–≤–µ–Ω—å"},{en:"Sealed leaks",ru:"–ì–µ—Ä–º–µ—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ç–µ—á–∫–∏"},{en:"Ice maker reset",ru:"–õ—å–¥–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–±—Ä–æ—à–µ–Ω"},{en:"Motor replaced",ru:"–ú–æ—Ç–æ—Ä –∑–∞–º–µ–Ω—ë–Ω"},{en:"Firmware updated",ru:"–ü—Ä–æ—à–∏–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞"},{en:"Replace spring",ru:"–ü—Ä—É–∂–∏–Ω–∞ –∑–∞–º–µ–Ω–µ–Ω–∞"},{en:"Checked voltage",ru:"–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–∏—Ç–∞–Ω–∏–µ"},{en:"Insulation renewed",ru:"–û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏–∑–æ–ª—è—Ü–∏—è"},{en:"Relay replaced",ru:"–†–µ–ª–µ –∑–∞–º–µ–Ω–µ–Ω–æ"},{en:"Installed gasket",ru:"–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É–ø–ª–æ—Ç–Ω–∏—Ç–µ–ª—å"},{en:"Poles reconnected",ru:"–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–Ω—Ç–∞–∫—Ç—ã"},{en:"Contacts cleaned",ru:"–ü–æ—á–∏—â–µ–Ω—ã –∫–æ–Ω—Ç–∞–∫—Ç—ã"},{en:"Replaced transformer",ru:"–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä –∑–∞–º–µ–Ω–µ–Ω"},{en:"Replace magnet",ru:"–ú–∞–≥–Ω–∏—Ç –∑–∞–º–µ–Ω—ë–Ω"},{en:"Adjusted settings",ru:"–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞"},{en:"Drain thawed",ru:"–î—Ä–µ–Ω–∞–∂ —Ä–∞–∑–º–æ—Ä–æ–∂–µ–Ω"},{en:"Fixed light",ru:"–õ–∞–º–ø–æ—á–∫–∞ –ø–æ—á–∏–Ω–µ–Ω–∞"},{en:"Installed blade",ru:"–õ–æ–ø–∞—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"},{en:"Bypass installed",ru:"–ë–∞–π–ø–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"},{en:"Repaired hose",ru:"–®–ª–∞–Ω–≥ –æ—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω"},{en:"Evaporator defrosted",ru:"–ò—Å–ø–∞—Ä–∏—Ç–µ–ª—å —Ä–∞–∑–º–æ—Ä–æ–∂–µ–Ω"},{en:"Fan balanced",ru:"–í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω"},{en:"Checked connections",ru:"–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è"},{en:"Fixed breaker",ru:"–ê–≤—Ç–æ–º–∞—Ç –ø–æ—á–∏–Ω–µ–Ω"},{en:"Replace capacitor",ru:"–ö–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –∑–∞–º–µ–Ω—ë–Ω"},{en:"Old parts removed",ru:"–°—Ç–∞—Ä—ã–µ –¥–µ—Ç–∞–ª–∏ —É–±—Ä–∞–Ω—ã"},{en:"Gasket cleaned",ru:"–ü—Ä–æ–∫–ª–∞–¥–∫–∞ –ø–æ—á–∏—â–µ–Ω–∞"}]
},
// –ê–ù–ê–õ–û–ì–ò–ß–ù–û: dishwasher, washing_machine, dryer, stove_oven, microwave ‚Äî –º–∞—Å—Å–∏–≤—ã –ø–æ 50 (—Å–æ–∫—Ä–∞—â–µ–Ω–æ –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è!)
// –î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –Ω–µ –º–æ–≥—É –∑–¥–µ—Å—å –≤—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ 6√ó4√ó50 —Å—Ç—Ä–æ–∫ —Å—Ä–∞–∑—É ‚Äî –∏—Ö –ª–µ–≥–∫–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å (—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é –Ω–∞ –∫–∞–∂–¥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø—Ä–∏–º–µ—Ä—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –ø—Ä–∏—Å—ã–ª–∞—é –∫—É—Å–∫–∞–º–∏)
// –°–£–¢–¨: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è! –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ ‚Äî –ø—Ä–∏—Å—ã–ª–∞—é –º–∞—Å—Å–∏–≤—ã –ø—Ä–æ–±–ª–µ–º/diagnosis/actions –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –æ—Ç–¥–µ–ª—å–Ω–æ —Å–≤–µ—Ä—Ö–ª–∏–º–∏—Ç!
};

// –î–∞–ª–µ–µ –≤–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π JS –∏–∑ –≤–∞—à–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—É–Ω–∫—Ç—ã, localStorage, –∏—Å—Ç–æ—Ä–∏—è, mode-switch, –æ—Ç—á–µ—Ç—ã ‚Äî —Ä–æ–≤–Ω–æ –∫–∞–∫ –≤ –ø—Ä–æ—à–ª—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö)

/* ... –û—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å—å JS –∏–∑ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ –≤—ã—à–µ ... */
let customProblems = JSON.parse(localStorage.getItem('arpro_custom_problems')||'{}');
let customDiagnosis = JSON.parse(localStorage.getItem('arpro_custom_diagnosis')||'{}');
let customActions = JSON.parse(localStorage.getItem('arpro_custom_actions')||'{}');

const categorySelect = document.getElementById('category');
const brandSelect = document.getElementById('brand');
const problemSelect = document.getElementById('problem');
const diagnosisSelect = document.getElementById('diagnosis');
const actionSelect = document.getElementById('action');
const form = document.getElementById('repairForm');
const clearBtn = document.getElementById('clearBtn');
// ...–∏ –≤–µ—Å—å –æ—Å—Ç–∞–ª—å–Ω–æ–π JS "–æ–¥–∏–Ω –≤ –æ–¥–∏–Ω" –∫–∞–∫ —Ä–∞–Ω–µ–µ... –ø—Ä–æ—Å—Ç–æ –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –º–∞—Å—Å–∏–≤–∞–º–∏ ‚¨ÜÔ∏è

function reloadSelect(select, arr, customs, key){
    select.innerHTML = `<option value="">Select ${key.charAt(0).toUpperCase()+key.slice(1)}</option>`;
    arr.forEach(obj=>{
        select.insertAdjacentHTML('beforeend', `<option>${obj.en} / ${obj.ru}</option>`);
    });
    const cc = customs[categorySelect.value]||[];
    cc.forEach(({en,ru},i)=>{
        select.insertAdjacentHTML('beforeend', `<option data-custom="1" data-idx="${i}">${en}${ru?' / '+ru:''} ‚òÖ</option>`);
    });
}
function updateAllCategoryFields(){
    const c = categorySelect.value;
    if(!c || !applianceData[c]) {
        brandSelect.innerHTML='<option value="">Select Brand</option>';
        reloadSelect(problemSelect,[],customProblems,'problem');
        reloadSelect(diagnosisSelect,[],customDiagnosis,'diagnosis');
        reloadSelect(actionSelect,[],customActions,'action');
        return;
    }
    brandSelect.innerHTML='<option value="">Select Brand</option>';
    applianceData[c].brands.forEach(br=>{
        let op=document.createElement('option');
        op.value=br;
        op.textContent=br;
        brandSelect.appendChild(op);
    });
    reloadSelect(problemSelect,applianceData[c].problems,customProblems,'problem');
    reloadSelect(diagnosisSelect,applianceData[c].diagnosis,customDiagnosis,'diagnosis');
    reloadSelect(actionSelect,applianceData[c].actions,customActions,'action');
}

problemSelect.ondblclick = () => addCustomToSelect(problemSelect, 'arpro_custom_problems', customProblems);
diagnosisSelect.ondblclick = () => addCustomToSelect(diagnosisSelect, 'arpro_custom_diagnosis', customDiagnosis);
actionSelect.ondblclick = () => addCustomToSelect(actionSelect, 'arpro_custom_actions', customActions);
[problemSelect,diagnosisSelect,actionSelect].forEach((sel,i)=>{
    sel.onkeydown=(e)=>{
        if(e.key==='Delete'){
            ['arpro_custom_problems','arpro_custom_diagnosis','arpro_custom_actions'].forEach((t,n)=>{
                if(i===n) removeCustomFromSelect(sel,t,
                    t==='arpro_custom_problems'?customProblems:t==='arpro_custom_diagnosis'?customDiagnosis:customActions );
            });
        }
    };
});

let reportsArr = JSON.parse(localStorage.getItem('arpro_reports_history')||'[]');
function getCurrentReport(){
    return {
        date:new Date().toLocaleString(),
        appliance: categorySelect.options[categorySelect.selectedIndex]?.text ?? '',
        brand: brandSelect.options[brandSelect.selectedIndex]?.text ?? '',
        model: document.getElementById('model').value.trim(),
        serial: document.getElementById('serial').value.trim(),
        year: document.getElementById('year').value.trim(),
        problem: problemSelect.options[problemSelect.selectedIndex]?.text ?? '',
        diagnosis: diagnosisSelect.options[diagnosisSelect.selectedIndex]?.text ?? '',
        action: actionSelect.options[actionSelect.selectedIndex]?.text ?? '',
        status: document.getElementById('status').options[document.getElementById('status').selectedIndex]?.text ?? '',
        notes: document.getElementById('notes').value.trim(),
        price: document.getElementById('price').value.trim()
    };
}
function reportToText(r){
    return `[${r.appliance}]
Brand: ${r.brand}
Model: ${r.model}
Serial#: ${r.serial}
Year: ${r.year}
Problem: ${r.problem}
Diagnosis: ${r.diagnosis}
Action: ${r.action}
Status: ${r.status}
Notes: ${r.notes}
Price: $${r.price}
Date: ${r.date}`.trim();
}
function renderAllReports(){
    let out = '';
    reportsArr.forEach((r,idx) => out+=`
        <div class="report-output" style="margin-top:24px;">
          <div class="report-title">üìÑ Report #${idx+1}</div>
          <div class="report-content">
             <div class="report-line"><span class="report-label">Date:</span> <span class="report-value">${r.date||''}</span></div>
             <div class="report-line"><span class="report-label">Appliance Type:</span> <span class="report-value">${r.appliance}</span></div>
             <div class="report-line"><span class="report-label">Brand:</span> <span class="report-value">${r.brand}</span></div>
             <div class="report-line"><span class="report-label">Model:</span> <span class="report-value">${r.model}</span></div>
             <div class="report-line"><span class="report-label">Serial:</span> <span class="report-value">${r.serial}</span></div>
             <div class="report-line"><span class="report-label">Year of Manufacture:</span> <span class="report-value">${r.year}</span></div>
             <div class="report-line"><span class="report-label">Problem:</span> <span class="report-value">${r.problem}</span></div>
             <div class="report-line"><span class="report-label">Diagnosis:</span> <span class="report-value">${r.diagnosis}</span></div>
             <div class="report-line"><span class="report-label">Action Taken:</span> <span class="report-value">${r.action}</span></div>
             <div class="report-line"><span class="report-label">Status:</span> <span class="report-value">${r.status}</span></div>
             <div class="report-line"><span class="report-label">Additional Notes:</span> <span class="report-value">${r.notes}</span></div>
             <div class="report-line"><span class="report-label">Price:</span> <span class="report-value">$${r.price}</span></div>
          </div>
        </div>`);
    if (!document.getElementById('allReportsBlock')) {
        let allRepHtml = document.createElement('div');
        allRepHtml.id = 'allReportsBlock';
        form.parentNode.insertBefore(allRepHtml, document.querySelector('.templates'));
    }
    document.getElementById('allReportsBlock').innerHTML = out;
    if (!document.getElementById('reportsControlBtns')) {
        let repBlock = document.createElement('div');
        repBlock.id = 'reportsControlBtns';
        repBlock.className = 'action-buttons';
        repBlock.innerHTML = `
            <button type="button" class="btn btn-primary" id="copyAllBtn">üìë Copy All Reports</button>
            <button type="button" class="btn btn-primary" id="copyLastBtn">üìã Copy Last Report</button>
            <button type="button" class="btn btn-secondary" id="clearAllBtn">üóëÔ∏è Clear All Reports</button>
        `;
        form.parentNode.insertBefore(repBlock, document.getElementById('allReportsBlock'));
        repBlock.querySelector('#copyAllBtn').onclick = () => {
            if(reportsArr.length) navigator.clipboard.writeText(reportsArr.map(reportToText).join('\n\n====\n\n'));
        };
        repBlock.querySelector('#copyLastBtn').onclick = () => {
            if(reportsArr.length) navigator.clipboard.writeText(reportToText(reportsArr[reportsArr.length-1]));
        };
        repBlock.querySelector('#clearAllBtn').onclick = () => {
            if(confirm('Clear ALL reports?')){
                reportsArr.length = 0; renderAllReports(); localStorage.setItem('arpro_reports_history','[]');
            }
        };
    }
    document.getElementById('reportsControlBtns').classList.toggle('hidden', reportsArr.length === 0);
}
categorySelect.addEventListener('change',updateAllCategoryFields);
form.addEventListener('submit', e => {
    e.preventDefault();
    const report = getCurrentReport();
    reportsArr.push(report);
    localStorage.setItem('arpro_reports_history', JSON.stringify(reportsArr));
    renderAllReports();
    form.reset(); updateAllCategoryFields();
});
clearBtn.addEventListener('click', () => {form.reset();updateAllCategoryFields();});
window.addEventListener('DOMContentLoaded',()=>{
    renderAllReports();
    updateAllCategoryFields();
    document.querySelectorAll('.translation').forEach(el=>el.classList.remove('hidden'));
});
const modeButtons = document.querySelectorAll('.mode-btn');
modeButtons.forEach(button => {
    button.addEventListener('click', () => {
        modeButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        const isClient = button.getAttribute('data-mode') === 'client';
        document.querySelectorAll('.translation').forEach(el=>{
            if(isClient) el.classList.add('hidden'); else el.classList.remove('hidden');
        });
    });
});

function addCustomToSelect(select, typeKey, storageObj) {
    if (!categorySelect.value) return alert('Choose appliance type first!');
    let en = prompt('Custom (en):');
    if(!en) return;
    let ru = prompt('Custom (ru):')||'';
    let arr = storageObj[categorySelect.value] || [];
    arr.push({en,ru});
    storageObj[categorySelect.value] = arr;
    localStorage.setItem(typeKey, JSON.stringify(storageObj));
    updateAllCategoryFields();
}
function removeCustomFromSelect(select, typeKey, storageObj) {
    let idx = select.selectedIndex;
    let opt = select.options[idx];
    if (opt && opt.dataset.custom) {
        if (confirm('Remove this custom entry?')) {
            let arr = storageObj[categorySelect.value] || [];
            arr.splice(opt.dataset.idx, 1);
            storageObj[categorySelect.value] = arr;
            localStorage.setItem(typeKey, JSON.stringify(storageObj));
            updateAllCategoryFields();
        }
    }
}
  </script>
</body>
</html>
